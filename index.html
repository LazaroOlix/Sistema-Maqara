<!DOCTYPE html>
<html>
<body>
  <h1>PrintTech</h1>

  <input id="nome" placeholder="Nome do cliente" />
  <button onclick="add()">Adicionar</button>

  <ul id="lista"></ul>

  <script>
    const sqlite3 = require("sqlite3").verbose();
    const { remote } = require("electron");
    const path = require("path");

    const dbPath = path.join(
      remote.app.getPath("userData"),
      "printtech.db"
    );

    const db = new sqlite3.Database(dbPath);

    function add() {
      const nome = document.getElementById("nome").value;
      db.run("INSERT INTO clientes (nome) VALUES (?)", [nome], load);
    }

    function load() {
      db.all("SELECT * FROM clientes", (err, rows) => {
        document.getElementById("lista").innerHTML =
          rows.map(r => `<li>${r.nome}</li>`).join("");
      });
    }

    load();
  </script>
</body>
</html>
